import requests
from  PIL import  Image
import base64
from time import sleep
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
import re
chrome_options = Options()
chrome_options.add_argument('--headless')
wb = webdriver.Chrome()

url ='https://www.zhihu.com/api/v4/members/kaifulee/followers?include=data%5B*%5D.answer_count%2Carticles_count%2Cgender%2Cfollower_count%2Cis_followed%2Cis_following%2Cbadge%5B%3F(type%3Dbest_answerer)%5D.topics&offset={}&limit=20'

url = url.format(0)


headers = {
    'User-Agent':"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
    'authorization':'oauth c3cef7c66a1843f8b3a9e6a1e3160e20',
    'X-Xsrftoken':'262f8ee4-fa2e-4423-bb05-6cd5e385f85e',
    'X-UDID':'ACDv1ScVew2PTiZagOWZ6wVWpZDr3GsDp0Q='
}


js = requests.get(url,headers=headers).json()

error = js['error']['redirect']

wb.get(error)
print(error)
sleep(1)
src = wb.find_element_by_css_selector('#root > div > div > section > div > img').get_attribute('src')
strs = '''R0lGODdhlgA8AIcAAP7+/gICAujo6NjY2BcXFyYmJkdHR/Pz88jIyFdXV5eXl3d3dzU1NWZmZoiI%0AiKampre3t7e3t6urqzw8PMLCwiwsLEBAQJ+fnwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAlgA8AEAI/wABCBxI%0AsKDBgwgTKlzIsKHDhxAjSlzgIECDAQAGANjIsaPHjyA9RggQgEAAAwIIABAAAEAEADBjypxJs6bN%0Amzhz6twZU8KDAgEcNBAAoKjRogUCKF0aoEGBAFAJSC0QgAECAFgBHCAQAAGDAGAHABhLduwAAA8C%0A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%0AIUaUOJFiRYsKAwIAOw=='''
strs = strs.replace(r'\n', r'')
imgdata = base64.b64decode(strs)
with open('1.jpg', 'wb') as f:
    f.write(imgdata)


im = Image.open('1.jpg')
im.show()

code = input('asdasdad:  ')


post_res = requests.post('https://www.zhihu.com/api/v4/anticrawl/captcha_appeal',data={"captcha":code},headers=headers)

js = requests.get(url,headers=headers).json()
print(js)